{% extends "digitalbeti/logged-in/dashboard_base.html" %}
{% load static %}

<!-- Title -->
{% block title %}
    Admin Dashboard || Digital Beti
{% endblock title %}

{% block body %}

    <!-- Content -->
    <div class="container py-5">
        <div class="row py-2">
            <div class="col">
                <h3>Geographic Data</h3>
            </div>
        </div>
        <div class="row py-2">
            <div class="col-3 my-2">
                <div class="card h-100">
                    <div class="card-body d-flex flex-column justify-content-between">
                        <h5 class="card-title">Total States</h5>
                        <h1>{{ state_count }}</h1>
                    </div>
                </div>
            </div>
            <div class="col-3 my-2">
                <div class="card h-100">
                    <div class="card-body d-flex flex-column justify-content-between">
                        <h5 class="card-title">Total Districts</h5>
                        <h1>{{ district_count }}</h1>
                    </div>
                </div>
            </div>
            <div class="col-3 my-2">
                <div class="card h-100">
                    <div class="card-body d-flex flex-column justify-content-between">
                        <h5 class="card-title">Total Subdistricts</h5>
                        <h1>{{ subdistrict_count }}</h1>
                    </div>
                </div>
            </div>
            <div class="col-3 my-2">
                <div class="card h-100">
                    <div class="card-body d-flex flex-column justify-content-between">
                        <h5 class="card-title">Total Villages</h5>
                        <h1>{{ village_count }}</h1>
                    </div>
                </div>
            </div>
        </div>
        <div class="row  py-2">
            <div class="col">
                <h3>User Registration Data</h3>
            </div>
        </div>
        <div class="row  py-2">
            {% for tc in total_counts %}
                <div class="col-3 my-2">
                    <div class="card h-100">
                        <div class="card-body d-flex flex-column justify-content-between">
                            <h5 class="card-title">Total {{ tc.kind|upper }}s</h5>
                            <h1>{{ tc.num_user }}</h1>
                        </div>
                    </div>
                </div>
            {% endfor %}
        </div>
        <div class="row  py-2">
            <div class="col">
                <h3>Examination Data</h3>
            </div>
        </div>
        <div class="row  py-2">
            <div class="col-3 my-2">
                <div class="card h-100">
                    <div class="card-body d-flex flex-column justify-content-between">
                        <h5 class="card-title">Total Users Who Gave Exam</h5>
                        <h1>{{ total_exams_given }}</h1>
                    </div>
                </div>
            </div>
            <div class="col-3 my-2">
                <div class="card h-100">
                    <div class="card-body d-flex flex-column justify-content-between">
                        <h5 class="card-title">Total Users Passed</h5>
                        <h1>{{ total_passed }}</h1>
                    </div>
                </div>
            </div>
            <div class="col-3 my-2">
                <div class="card h-100">
                    <div class="card-body d-flex flex-column justify-content-between">
                        <h5 class="card-title">Total Users Failed</h5>
                        <h1>{{ total_failed }}</h1>
                    </div>
                </div>
            </div>
            <div class="col-6 my-2">
                <div class="card h-100">
                    <div class="card-body d-flex flex-column justify-content-between">
                        <h5 class="card-title">Result</h5>
                        <canvas id="success_chart"></canvas>
                    </div>
                </div>
            </div>
        </div>
        <div class="row  py-2">
            <div class="col">
                <h3>Performance Data</h3>
            </div>
        </div>
        <div class="row  py-2">
            <div class="col-3 my-2">
                <div class="card h-100">
                    <div class="card-body d-flex flex-column justify-content-top">
                        <h5 class="card-title">Top States</h5>
                        {% for state in top_state %}
                            <p>{{ forloop.counter }}. <a
                                    href="{% url 'state_overview' state=state.state %}">{{ state.state|title }}</a> ({{ state.num_reg }})
                            </p>
                        {% endfor %}
                    </div>
                </div>
            </div>
            <div class="col-3 my-2">
                <div class="card h-100">
                    <div class="card-body d-flex flex-column justify-content-top">
                        <h5 class="card-title">Top VLEs</h5>
                        {% for vle in top_vle %}
                            <p>{{ forloop.counter }}. <a
                                    href="{% url 'vle_overview' user_id=vle.id %}">{{ vle.user.first_name }} {{ vle.user.last_name }}</a>
                            </p>
                        {% endfor %}
                    </div>
                </div>
            </div>
        </div>
    </div>

{% endblock body %}


{% block scripttags %}
    <script type="text/javascript">
        var ctx = document.getElementById('success_chart');
        new Chart(ctx, {
            type: 'doughnut',
            data: {
                labels: ['Passed', 'Failed'],
                datasets: [
                    {
                        label: '# of Votes',
                        data: [{{total_passed}}, {{total_failed}}],
                        backgroundColor: [
                            '#0183FB',
                            '#00227C'
                        ],
                        borderColor: [
                            '#0183FB',
                            '#00227C'
                        ],
                        borderWidth: 1
                    }]
            },
            {#optio ns: options#}
        });
    </script>
{% endblock scripttags %}